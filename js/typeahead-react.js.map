{"version":3,"sources":["../jsx/typeahead-react.js"],"names":["SelectedItemList","React","createClass","handleClick","index","event","preventDefault","props","onRemoveSelectedItem","render","_this","idName","textName","idFormName","textFormName","items","map","item","bind","selectedItemCallback","Typeahead","getInitialState","selectOnly","filterText","showDropdown","filteredItems","data","selectedItems","exactMatch","selectedItemIdx","componentDidMount","addEvent","window","addEventListener","handleWindowClose","componentWillUnmount","removeEvent","removeEventListener","loadData","query","url","seperator","indexOf","$","ajax","queryParam","dataType","cache","success","convertData","resultList","setDropdownList","error","xhr","status","err","console","toString","setState","renderInput","placeHolder","inputClass","state","handleTextChange","handleFocus","handleKeyDown","renderDropdown","ulClassName","handleMouseOut","liClassName","handleItemClick","handleItemMouseOver","length","getExactMatchIdx","i","matchIdx","newItem","concat","focus","ReactDOM","findDOMNode","refs","inputTextBox","isInArray","addSelectedItem","itemSelectCallback","target","contains","value","forEach","push","action","keyCode","currentIdx","removeSelectedItem","slice","splice"],"mappings":"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","file":"typeahead-react.js","sourcesContent":["\r\nvar SelectedItemList = React.createClass({\r\n    handleClick: function(index, event){\r\n        event.preventDefault();\r\n        this.props.onRemoveSelectedItem(index);\r\n    },\r\n    render: function(){\r\n        var _this = this;\r\n        var idName = this.props.idName;\r\n        var textName = this.props.textName;\r\n\r\n        var idFormName = this.props.idFormName;\r\n        var textFormName = this.props.textFormName;\r\n\r\n        return (\r\n            <ul className=\"mm-popover-tags\">\r\n            {\r\n                this.props.items.map(function(item, index){\r\n                    return (\r\n                        <li>\r\n                            <span>{item[textName]}</span> <a href=\"#\" onClick={_this.handleClick.bind(_this, index)}><i className=\"fa fa-close\"></i></a>\r\n                            <input type=\"hidden\" name={idFormName} value={item[idName]}  />\r\n                            <input type=\"hidden\" name={textFormName} value={item[textName]} />\r\n                            {(_this.props.selectedItemCallback) ? _this.props.selectedItemCallback(item) : null}\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n            </ul>\r\n        );\r\n    }\r\n});\r\n\r\nvar Typeahead = React.createClass({\r\n    getInitialState: function() {\r\n        return {\r\n            selectOnly: (this.props.selectOnly) ? this.props.selectOnly : false,\r\n            filterText: '',\r\n            showDropdown: false,\r\n            filteredItems: (this.props.data) ? this.props.data : [],\r\n            selectedItems: (this.props.selectedItems) ? this.props.selectedItems : [],\r\n            exactMatch: false,\r\n            selectedItemIdx: -1,\r\n            idName: (this.props.idName) ? this.props.idName : 'id',\r\n            textName: (this.props.textName) ? this.props.textName : 'text'\r\n        };\r\n    },\r\n    componentDidMount: function() {\r\n        var addEvent = window.addEventListener,\r\n            handleWindowClose = this.handleWindowClose;\r\n\r\n        // The `focus` event does not bubble, so we must capture it instead.\r\n        // This closes Typeahead's dropdown whenever something else gains focus.\r\n        addEvent('focus', handleWindowClose, true);\r\n\r\n        // If we click anywhere outside of Typeahead, close the dropdown.\r\n        addEvent('click', handleWindowClose, false);\r\n    },\r\n\r\n    componentWillUnmount: function() {\r\n        var removeEvent = window.removeEventListener,\r\n            handleWindowClose = this.handleWindowClose;\r\n\r\n        removeEvent('focus', handleWindowClose, true);\r\n        removeEvent('click', handleWindowClose, false);\r\n    },\r\n    loadData: function(query){\r\n        var url = '';\r\n\r\n        if (typeof this.props.url == 'string') {\r\n            url = this.props.url;\r\n        } else if (typeof this.props.url == 'function') {\r\n            url = this.props.url();\r\n        }\r\n\r\n        if (!url) {\r\n            return null;\r\n        }\r\n\r\n        var seperator = \"?\";\r\n        if (url.indexOf(\"?\") > -1) {\r\n            seperator = \"&\";\r\n        }\r\n\r\n        $.ajax({\r\n            url: url + seperator + this.props.queryParam + '=' + query,\r\n            dataType: 'json',\r\n            cache: false,\r\n            success: function(data) {\r\n                if (typeof this.props.convertData != 'undefined') {\r\n                    var resultList = this.props.convertData(data);\r\n                    this.setDropdownList(query, resultList);\r\n                } else {\r\n                    this.setDropdownList(query, data);\r\n                }\r\n\r\n            }.bind(this),\r\n            error: function(xhr, status, err) {\r\n                console.error(url, status, err.toString());\r\n                this.setState({filteredItems: []});\r\n            }.bind(this)\r\n        });\r\n    },\r\n    renderInput: function(){\r\n        return (\r\n            <input type=\"text\" placeholder={this.props.placeHolder}\r\n                className={this.props.inputClass}\r\n                value={this.state.filterText}\r\n                ref=\"inputTextBox\"\r\n                onChange={this.handleTextChange}\r\n                onFocus={this.handleFocus}\r\n                onKeyDown={this.handleKeyDown}\r\n                ></input>\r\n        );\r\n    },\r\n    renderDropdown: function(){\r\n        var _this = this;\r\n        var selectedItemIdx = this.state.selectedItemIdx;\r\n        var idName = this.state.idName;\r\n        var textName = this.state.textName;\r\n\r\n        var ulClassName = 'dropdown-item-list';\r\n        if (this.state.showDropdown) {\r\n            ulClassName = 'dropdown-item-list open';\r\n        }\r\n\r\n        return (\r\n            <ul className={ulClassName} onMouseOut={this.handleMouseOut} >\r\n            {\r\n                this.state.filteredItems.map(function(item, index) {\r\n                    var liClassName = (selectedItemIdx == index) ? 'active': '';\r\n\r\n                    if (!_this.state.exactMatch && index == 0 && selectedItemIdx == 0) {\r\n                        liClassName += ' non-match';\r\n                    }\r\n\r\n                    return (\r\n                        <li key={item[idName]}\r\n                            className={liClassName}\r\n                            onClick={_this.handleItemClick.bind(_this, index)}\r\n                            onMouseOver={_this.handleItemMouseOver.bind(_this, index)}\r\n                        ><i className=\"fa fa-plus-circle\"></i> <span>{item[textName]}</span></li>\r\n                    );\r\n                })\r\n            }\r\n            {\r\n                (this.state.filteredItems.length == 0) ? <li> <span>Үр дүн олдсонгүй</span></li> : null\r\n            }\r\n            </ul>\r\n\r\n        );\r\n    },\r\n    getExactMatchIdx: function(query, resultList) {\r\n        if (query && resultList.length > 0) {\r\n            for (var i = 0; i < resultList.length; i++) {\r\n                if (resultList[i][this.state.textName] === query) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    },\r\n    setDropdownList: function(query, resultList){\r\n        var matchIdx = this.getExactMatchIdx(query, resultList);\r\n\r\n        if (query && matchIdx == -1) {\r\n            if (this.state.selectOnly) {\r\n                this.setState({\r\n                    exactMatch: false,\r\n                    filteredItems: resultList,\r\n                    selectedItemIdx: -1\r\n                });\r\n            } else {\r\n                var newItem = {};\r\n                newItem[this.state.idName] = 0;\r\n                newItem[this.state.textName] = query;\r\n\r\n                this.setState({\r\n                    exactMatch: false,\r\n                    filteredItems: [newItem].concat(resultList),\r\n                    selectedItemIdx: 0\r\n                });\r\n            }\r\n\r\n        } else {\r\n            this.setState({\r\n                exactMatch: true,\r\n                filteredItems: resultList,\r\n                selectedItemIdx: matchIdx\r\n            });\r\n        }\r\n    },\r\n    focus: function() {\r\n        ReactDOM.findDOMNode(this.refs.inputTextBox).focus();\r\n    },\r\n    handleItemClick: function(index){\r\n        var item = this.state.filteredItems[index];\r\n        var selectedItems = this.state.selectedItems;\r\n\r\n        if (!this.isInArray(selectedItems, item)) {\r\n            this.addSelectedItem(item);\r\n        }\r\n\r\n    },\r\n    addSelectedItem: function(item){\r\n        if (this.props.itemSelectCallback) {\r\n            this.props.itemSelectCallback(item);\r\n\r\n            this.setState({\r\n                filterText: '',\r\n                showDropdown: false,\r\n                selectedItemIdx: -1\r\n            });\r\n        } else {\r\n            this.setState({\r\n                filterText: '',\r\n                showDropdown: false,\r\n                selectedItems: this.state.selectedItems.concat([item]),\r\n                selectedItemIdx: -1\r\n            });\r\n        }\r\n\r\n    },\r\n    handleMouseOut: function(event){\r\n    },\r\n    handleItemMouseOver: function(index) {\r\n    },\r\n    handleWindowClose: function(event) {\r\n        var target = event.target;\r\n        var inputTextBox = ReactDOM.findDOMNode(this.refs.inputTextBox);\r\n\r\n        if (target !== window && !inputTextBox.contains(target)) {\r\n            this.setState({\r\n                showDropdown: false\r\n            });\r\n        }\r\n    },\r\n    handleTextChange: function() {\r\n        var filterText = this.refs.inputTextBox.value;\r\n        var textName = this.state.textName;\r\n\r\n        if (this.props.url) {\r\n            this.loadData(filterText);\r\n            this.setState({\r\n                filterText: filterText\r\n            });\r\n        } else {\r\n            var resultList = [];\r\n            this.props.data.forEach(function(item){\r\n                if(filterText != '' && item[textName].indexOf(filterText) === -1) {\r\n                    return;\r\n                }\r\n\r\n                resultList.push(item);\r\n            }.bind(this));\r\n\r\n            this.setState({\r\n                filterText: filterText\r\n            });\r\n            this.setDropdownList(filterText, resultList);\r\n\r\n            /*this.setState({\r\n                filterText: filterText,\r\n                filteredItems: filteredItems\r\n            });*/\r\n        }\r\n\r\n    },\r\n    handleFocus: function() {\r\n        var filterText = this.refs.inputTextBox.value;\r\n\r\n        if (this.props.url) {\r\n            if (filterText == '') {\r\n                this.loadData(filterText);\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            showDropdown: true\r\n        });\r\n    },\r\n    handleKeyDown: function(event) {\r\n        var showDropdown = true;\r\n        var action = '';\r\n        if (event.keyCode == 38) {\r\n            action = 'up';\r\n        }\r\n        if (event.keyCode == 40) {\r\n            action = 'down';\r\n        }\r\n        if (event.keyCode == 27) {\r\n            showDropdown = false;\r\n            action = 'esc';\r\n        }\r\n\r\n        if (event.keyCode == 13) {\r\n            action = 'enter';\r\n            event.preventDefault();\r\n        }\r\n\r\n        var length = this.state.filteredItems.length;\r\n        var currentIdx = this.state.selectedItemIdx;\r\n        var selectedItemIdx = -1;\r\n\r\n\r\n\r\n        if (action == 'down') {\r\n            if (length > 0) {\r\n                if (currentIdx == -1) {\r\n                    selectedItemIdx = 0;\r\n                } else if (currentIdx == length - 1) {\r\n                    selectedItemIdx = 0;\r\n                } else {\r\n                    selectedItemIdx = currentIdx + 1\r\n                }\r\n            }\r\n        }\r\n\r\n        if (action == 'up') {\r\n            if (length > 0) {\r\n                if (currentIdx == -1) {\r\n                    selectedItemIdx = length - 1;\r\n                } else if (currentIdx == 0) {\r\n                    selectedItemIdx = length - 1;\r\n                } else {\r\n                    selectedItemIdx = currentIdx - 1\r\n                }\r\n            }\r\n        }\r\n\r\n        if (action == 'enter') {\r\n            if (currentIdx > -1) {\r\n                var item = this.state.filteredItems[currentIdx];\r\n                var selectedItems = this.state.selectedItems;\r\n\r\n                if (!this.isInArray(selectedItems, item)) {\r\n                    this.addSelectedItem(item);\r\n                } else {\r\n                    this.setState({\r\n                        showDropdown: false,\r\n                        selectedItemIdx: -1\r\n                    });\r\n                }\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            showDropdown: showDropdown,\r\n            selectedItemIdx: selectedItemIdx\r\n        });\r\n\r\n    },\r\n    removeSelectedItem: function(index){\r\n        var selectedItems = this.state.selectedItems.slice(0);\r\n        selectedItems.splice(index,1);\r\n\r\n        this.setState({\r\n            selectedItems: selectedItems\r\n        });\r\n    },\r\n    isInArray: function (items, item) {\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (items[i][this.state.textName] === item[this.state.textName]) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    render: function(){\r\n        return (\r\n            <div className=\"mm-typeahead-wrapper\">\r\n                <div className=\"mm-typeahead\" ref=\"typeahed\">\r\n                    {this.renderInput()}\r\n                    {this.renderDropdown()}\r\n                </div>\r\n                <SelectedItemList items={this.state.selectedItems} onRemoveSelectedItem={this.removeSelectedItem}\r\n                    idFormName={this.props.idFormName} textFormName={this.props.textFormName}\r\n                    idName={this.state.idName} textName={this.state.textName}\r\n                    selectedItemCallback={this.props.selectedItemCallback}/>\r\n            </div>\r\n        );\r\n    }\r\n});"]}